---
// AUTO-FLOW STORIES SYSTEM - Just add new stories to the top!
const allStories = [
  {
    title: "Tony's Revolutionary CFT System: From Vineyard to Manufacturing Excellence",
    excerpt: "Watch as Tony Busatta demonstrates the complete journey from traditional Italian vineyard wisdom to cutting-edge soil technology. This exclusive behind-the-scenes look reveals the precision manufacturing process that's revolutionizing sustainable agriculture.",
    author: "Tony Busatta",
    category: "Earthworms",
    date: "2025-01-30",
    youtubeId: "dQw4w9WgXcQ",
    link: "/earthworms/DailyMail/Michigan-Cft",
    badge: "TODAY'S FEATURE"
  },
  {
    title: "Peter's Wood Chip Selection Secrets: Advanced Carbon Ratio Mastery",
    excerpt: "Master the art of wood chip selection with Peter's advanced techniques for optimal carbon ratios. Learn how different wood types affect soil biology and discover the perfect combinations for explosive plant growth.",
    author: "Peter King",
    category: "Wood Chips", 
    date: "2025-01-29",
    youtubeId: "dQw4w9WgXcQ",
    link: "/wood-chips/DailyMail/Peter-Selection-Secrets",
    badge: "EXCLUSIVE"
  },
  {
    title: "Master Hun's Fermentation Fundamentals: Korean Natural Farming Revealed",
    excerpt: "Unlock the ancient secrets of Korean Natural Farming as Master Hun demonstrates the precise fermentation techniques that create living soil amendments. These time-tested methods are transforming modern agriculture.",
    author: "Master Hun",
    category: "KNF Methods",
    date: "2025-01-29", 
    youtubeId: "dQw4w9WgXcQ",
    link: "/knf/DailyMail/Master-Hun-Fermentation",
    badge: "BREAKTHROUGH"
  },
  {
    title: "The Busatta Vineyard Transformation: Three Generations of Italian Wisdom",
    excerpt: "Follow the incredible transformation of the Busatta family vineyard from depleted soil to thriving ecosystem. This emotional journey reveals how traditional Italian farming wisdom saved a 150-year legacy.",
    author: "Tony Busatta",
    category: "Earthworms",
    date: "2025-01-28",
    youtubeId: "dQw4w9WgXcQ", 
    link: "/earthworms/DailyMail/Vineyard-Transformation",
    badge: "INSPIRING"
  },
  {
    title: "Soil Biology Breakthrough: Microscopic Life That Transforms Gardens",
    excerpt: "Revolutionary new research reveals how microscopic soil organisms work together to create the perfect growing environment. See the invisible world that makes the difference between struggling and thriving plants.",
    author: "Dr. Sarah Chen",
    category: "Soil Health",
    date: "2025-01-28",
    youtubeId: "dQw4w9WgXcQ",
    link: "/soil-health/DailyMail/Microscopic-Life", 
    badge: "RESEARCH"
  },
  {
    title: "Wood Chip Composting Revolution: Fast-Track Soil Building",
    excerpt: "Discover the revolutionary wood chip composting method that creates rich, living soil in half the time. This game-changing technique is transforming how farmers think about organic matter decomposition.",
    author: "Peter King", 
    category: "Wood Chips",
    date: "2025-01-27",
    youtubeId: "dQw4w9WgXcQ",
    link: "/wood-chips/DailyMail/Fast-Track-Composting",
    badge: "GAME CHANGER"
  }
];

// AUTO-SORT BY DATE AND ASSIGN POSITIONS
const sortedStories = allStories.sort((a, b) => new Date(b.date) - new Date(a.date));

// AUTO-ASSIGN POSITIONS BASED ON DATE ORDER
const featuredStory = sortedStories[0];
const secondaryStories1 = sortedStories.slice(1, 3);
const previousStory = sortedStories[3];
const secondaryStories2 = sortedStories.slice(4, 6);
const earlierStory = sortedStories[6];

// Helper function to format dates
function formatDate(dateString) {
  const date = new Date(dateString);
  return date.toLocaleDateString('en-US', { 
    month: 'short', 
    day: 'numeric', 
    year: 'numeric' 
  });
}
---

<section class="daily-mail-section">
  <div class="container">
    
    <!-- Section Header -->
    <h2 class="section-title">Daily Farm Secrets</h2>
    <p class="section-subtitle">Fresh insights and techniques delivered daily</p>

    <!-- Stories Flow -->
    <div class="stories-flow">
      
      <!-- FEATURED STORY - 1 WIDE -->
      <article class="story-card featured">
        <div class="story-video">
          <iframe 
            src={`https://www.youtube.com/embed/${featuredStory.youtubeId}`}
            title={featuredStory.title}
            frameborder="0" 
            allowfullscreen>
          </iframe>
          <div class="story-badge">{featuredStory.badge}</div>
        </div>
        <div class="story-content">
          <div class="story-meta">
            <span class="category-badge">{featuredStory.category}</span>
            <span class="story-date">{formatDate(featuredStory.date)}</span>
          </div>
          <h3 class="story-headline">{featuredStory.title}</h3>
          <p class="story-excerpt">{featuredStory.excerpt}</p>
          <div class="story-author">
            <div class="author-info">
              <div class="author-avatar">{featuredStory.author.split(' ').map(n => n[0]).join('')}</div>
              <div class="author-details">
                <h4>{featuredStory.author}</h4>
                <p>Farming Specialist</p>
              </div>
            </div>
            <a href={featuredStory.link} class="read-more">Read Full Story â†’</a>
          </div>
        </div>
      </article>

      <!-- SECONDARY STORIES ROW 1 - 2 WIDE -->
      <div class="story-row">
        {secondaryStories1.map(story => (
          <article class="story-card secondary">
            <div class="story-video">
              <iframe 
                src={`https://www.youtube.com/embed/${story.youtubeId}`}
                title={story.title}
                frameborder="0" 
                allowfullscreen>
              </iframe>
              <div class="story-badge">{story.badge}</div>
            </div>
            <div class="story-content">
              <div class="story-meta">
                <span class="category-badge">{story.category}</span>
                <span class="story-date">{formatDate(story.date)}</span>
              </div>
              <h3 class="story-headline">{story.title}</h3>
              <p class="story-excerpt">{story.excerpt}</p>
              <div class="story-author">
                <div class="author-info">
                  <div class="author-avatar">{story.author.split(' ').map(n => n[0]).join('')}</div>
                  <div class="author-details">
                    <h4>{story.author}</h4>
                    <p>Farming Specialist</p>
                  </div>
                </div>
                <a href={story.link} class="read-more">Read Full Story â†’</a>
              </div>
            </div>
          </article>
        ))}
      </div>

      <!-- PREVIOUS STORY - 1 WIDE -->
      {previousStory && (
        <article class="story-card featured">
          <div class="story-video">
            <iframe 
              src={`https://www.youtube.com/embed/${previousStory.youtubeId}`}
              title={previousStory.title}
              frameborder="0" 
              allowfullscreen>
            </iframe>
            <div class="story-badge">{previousStory.badge}</div>
          </div>
          <div class="story-content">
            <div class="story-meta">
              <span class="category-badge">{previousStory.category}</span>
              <span class="story-date">{formatDate(previousStory.date)}</span>
            </div>
            <h3 class="story-headline">{previousStory.title}</h3>
            <p class="story-excerpt">{previousStory.excerpt}</p>
            <div class="story-author">
              <div class="author-info">
                <div class="author-avatar">{previousStory.author.split(' ').map(n => n[0]).join('')}</div>
                <div class="author-details">
                  <h4>{previousStory.author}</h4>
                  <p>Farming Specialist</p>
                </div>
              </div>
              <a href={previousStory.link} class="read-more">Read Full Story â†’</a>
            </div>
          </div>
        </article>
      )}

      <!-- SECONDARY STORIES ROW 2 - 2 WIDE -->
      {secondaryStories2.length > 0 && (
        <div class="story-row">
          {secondaryStories2.map(story => (
            <article class="story-card secondary">
              <div class="story-video">
                <iframe 
                  src={`https://www.youtube.com/embed/${story.youtubeId}`}
                  title={story.title}
                  frameborder="0" 
                  allowfullscreen>
                </iframe>
                <div class="story-badge">{story.badge}</div>
              </div>
              <div class="story-content">
                <div class="story-meta">
                  <span class="category-badge">{story.category}</span>
                  <span class="story-date">{formatDate(story.date)}</span>
                </div>
                <h3 class="story-headline">{story.title}</h3>
                <p class="story-excerpt">{story.excerpt}</p>
                <div class="story-author">
                  <div class="author-info">
                    <div class="author-avatar">{story.author.split(' ').map(n => n[0]).join('')}</div>
                    <div class="author-details">
                      <h4>{story.author}</h4>
                      <p>Farming Specialist</p>
                    </div>
                  </div>
                  <a href={story.link} class="read-more">Read Full Story â†’</a>
                </div>
              </div>
            </article>
          ))}
        </div>
      )}

    </div>

    <!-- Breaking News Ticker -->
    <div class="breaking-news">
      <div class="breaking-content">
        <span class="breaking-label">BREAKING</span>
        <div class="breaking-text">
          ðŸš¨ Master Hun reveals breakthrough KNF technique â€¢ Peter discovers optimal wood chip ratios â€¢ Tony's CFT system shows 300% yield increase â€¢ New earthworm species identified in Italian vineyards ðŸš¨
        </div>
      </div>
    </div>

  </div>
</section>

<style>
  .daily-mail-section {
    padding: 5px 40px 20px 40px;
    background-color: #f8f9fa;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .section-title {
    font-family: 'Roboto Serif', serif;
    font-weight: 300;
    font-size: 36px;
    text-align: center;
    margin-bottom: 5px;
    color: #000;
  }

  .section-subtitle {
    text-align: center;
    color: #666;
    margin-bottom: 25px;
    font-size: 16px;
  }

  .section-title::after {
    content: '';
    display: block;
    width: 60px;
    height: 3px;
    background: #16008A;
    margin: 10px auto 0;
  }

  /* Stories Flow - No gaps! */
  .stories-flow {
    display: flex;
    flex-direction: column;
    gap: 0;
    margin-bottom: 15px;
  }

  .story-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
  }

  .story-card {
    background: white;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }

  .story-card.featured {
    width: 100%;
  }

  .story-card.secondary {
    width: 100%;
  }

  .story-video {
    position: relative;
    width: 100%;
    height: 300px;
  }

  .story-video iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  .story-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: #dc2626;
    color: white;
    padding: 6px 12px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
    border-radius: 3px;
    z-index: 10;
  }

  .story-content {
    padding: 15px;
  }

  .story-meta {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
  }

  .category-badge {
    background: #16008A;
    color: white;
    padding: 3px 8px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    border-radius: 15px;
  }

  .story-date {
    color: #666;
    font-size: 12px;
  }

  .story-headline {
    font-family: 'Roboto Serif', serif;
    font-weight: 300;
    font-size: 20px;
    line-height: 1.2;
    color: #000;
    margin-bottom: 8px;
  }

  /* Featured stories get bigger headlines */
  .story-card.featured .story-headline {
    font-size: 24px;
    margin-bottom: 10px;
  }

  .story-excerpt {
    color: #333;
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 12px;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .story-author {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .author-info {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .author-avatar {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #16008A;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: bold;
  }

  .author-details h4 {
    font-size: 12px;
    font-weight: 600;
    margin: 0;
    color: #000;
  }

  .author-details p {
    font-size: 10px;
    margin: 0;
    color: #666;
  }

  .read-more {
    color: #16008A;
    font-weight: 600;
    text-decoration: none;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .read-more:hover {
    opacity: 0.8;
  }

  /* Breaking News */
  .breaking-news {
    background: #dc2626;
    color: white;
    padding: 15px;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
  }

  .breaking-content {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .breaking-label {
    background: white;
    color: #dc2626;
    padding: 8px 12px;
    font-weight: bold;
    font-size: 12px;
    border-radius: 4px;
    white-space: nowrap;
  }

  .breaking-text {
    font-size: 14px;
    animation: scroll 45s linear infinite;
    white-space: nowrap;
  }

  @keyframes scroll {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .daily-mail-section {
      padding: 15px 20px;
    }
    
    .story-row {
      grid-template-columns: 1fr;
    }
    
    .story-video {
      height: 250px;
    }
    
    .story-headline {
      font-size: 18px !important;
    }
  }
</style>